<link rel="stylesheet" href="/css/cart.css">
<div class="container-fluid pt-3">
    <table class="table table-hover text-center" style="margin-bottom: 120px;">
        <thead class="table-primary">
            <tr>
                <th style="width: 10%;">Hình ảnh</th>
                <th>Sản Phẩm</th>
                <th style="width: 10%;">Kích Thước</th>
                <th style="width: 20%;">Số Lượng</th>
                <th style="width: 10%;">Giá Tiền</th>
                <th style="width: 1%;">Xóa</th>
            </tr>
        </thead>
        <tbody>
            {{#each products}}
                <tr>
                    <td><img src="/uploads/{{image}}"></td>
                    <td><a href="/product/detail/{{id}}">{{name}}</a></td> 
                    <td>{{size}}</td>

                    <td>
                        <button onclick="update('down', {{quantity}}, '{{size}}', {{id}})" class="btn btn-secondary px-3 d-inline" ><i class="fa-solid fa-minus"></i></button>
                        <input disabled type="text" class="w-25 text-center form-control d-inline" value="{{quantity}}">
                        <button onclick="update('up', {{quantity}}, '{{size}}', {{id}})" class="btn btn-secondary px-3 d-inline" ><i class="fa-solid fa-plus"></i></button>
                    </td>

                    <td id="price">{{formatPrice price}}</td>
                    <td><i onclick="showDeleteModal({{id}}, '{{name}}', '{{size}}')" class="fa-solid fa-circle-xmark text-danger fa-2x"></i></td>
                </tr>
            {{/each}}
        </tbody>
    </table>

    <div class="fixed-bottom p-2">
        <div style="float: left;" class="w-50">
          <div class="form-outline mt-4">
            <input name="address" type="text" id="address" class="form-control" value="{{address}}"/>
            <label class="form-label" for="address">Địa chỉ</label>
          </div>
        </div>

        <div style="float: right;">
          <p style="font-size: 30px;">Tổng tiền: {{formatPrice (totalPrice products)}}</p>
          <button onclick="checkout('{{formatPrice (totalPrice products)}}')" class="btn btn-primary"><i class="fa-solid fa-cash-register"></i> Thanh toán</button>
        </div>
    </div>
</div>

<div class="modal fade" id="deleteModal">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h4 class="modal-title">Xóa sản phẩm</h4>
        <button type="button" class="close" onclick="closeDeleteModal()">&times;</button>
      </div>

      <div class="modal-body" id="modal-body">
        
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal" onclick="handleDelete()">Xóa</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="closeDeleteModal()">Đóng</button>
      </div>

    </div>
  </div>
</div>

<script src="/js/cart.js"></script>
<script src="/js/main.js"></script>